"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(b,u,r)=>{r.r(u),r.d(u,{LoginPageModule:()=>f});var M=r(6814),s=r(95),a=r(6728),p=r(6809),d=r(5861),n=r(6242),C=r(1675),P=r(6466);const m=()=>[""],O=[{path:"",component:(()=>{var e;class c{constructor(o,i,g,t){this.router=o,this.apiService=i,this.alertController=g,this.storageService=t,this.userData={first_name:"",password:"",telefono:"",email:"",username:""}}ngOnInit(){var o=this;return(0,d.Z)(function*(){o.storageService.getStorage()})()}realizarLogin(){this.apiService.login(this.username,this.password).subscribe(o=>{const i=null==o?void 0:o.user_id;var g;void 0!==i?(null===(g=this.storageService.getStorage())||void 0===g||g.set("user_id",i),this.apiService.getUserById(i).subscribe(t=>{this.usuarios=t,t&&t.id&&t.username&&t.telefono&&t.email&&this.apiService.createConductor({id:t.id,nombre_usuario:t.username,numero_telefono:t.telefono,correo_electronico:t.email,nombre_completo:t.first_name,viajes_realizados:0,usuario:t.id}).subscribe(_=>{console.log("Conductor creado correctamente:",_)},_=>{})},t=>{}),this.router.navigate(["./tabs"])):(console.error("El campo user_id no est\xe1 presente en la respuesta."),this.mostrarErrorAlerta("Error en la respuesta del servidor."))},o=>{console.error("Error en el login:",o),this.mostrarErrorAlerta("Credenciales incorrectas, compruebe su nombre de usuario y su contrase\xf1a.")})}mostrarErrorAlerta(o){var i=this;return(0,d.Z)(function*(){yield(yield i.alertController.create({header:"Error",message:o,buttons:["OK"]})).present()})()}handleClick(){this.router.navigate(["login/registro"])}}return(e=c).\u0275fac=function(o){return new(o||e)(n.Y36(p.F0),n.Y36(C.M),n.Y36(a.Br),n.Y36(P.e))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-login"]],decls:19,vars:5,consts:[[1,"sign_in_page_wrap"],[1,"login_content"],[1,"ion-text-center"],["src","../../assets/core/img/logoApp.png",2,"height","150px","width","300px"],[1,"formularioLogin",3,"ngSubmit"],["loginForm",""],["name","username","id","username","type","email","placeholder","Correo@duocuc.cl","required","",3,"ngModel","ngModelChange"],["type","password","placeholder","Password","name","password","id","password","required","",3,"ngModel","ngModelChange"],["expand","block","color","primary","type","submit",3,"disabled"],["href","#",3,"routerLink","click"],[1,"footer"]],template:function(o,i){1&o&&(n.TgZ(0,"ion-content")(1,"div",0)(2,"div",1)(3,"h1",2),n._UZ(4,"img",3),n.qZA(),n.TgZ(5,"form",4,5),n.NdJ("ngSubmit",function(){return i.realizarLogin()}),n.TgZ(7,"ion-input",6),n.NdJ("ngModelChange",function(t){return i.username=t}),n.qZA(),n.TgZ(8,"ion-input",7),n.NdJ("ngModelChange",function(t){return i.password=t}),n.qZA(),n.TgZ(9,"ion-button",8),n._uU(10,"INICIAR SESION"),n.qZA(),n.TgZ(11,"p"),n._uU(12," \xbfAun no tienes cuenta?"),n.TgZ(13,"a",9),n.NdJ("click",function(){return i.handleClick()}),n._uU(14," registrate ac\xe1"),n.qZA()()()()()(),n.TgZ(15,"ion-footer")(16,"ion-toolbar",10)(17,"p",2),n._uU(18,"Nicol\xe1s Mu\xf1oz || N\xe9stor Carvacho"),n.qZA()()()),2&o&&(n.xp6(7),n.Q6J("ngModel",i.username),n.xp6(1),n.Q6J("ngModel",i.password),n.xp6(1),n.Q6J("disabled",!i.username||!i.password),n.xp6(4),n.Q6J("routerLink",n.DdM(4,m)))},dependencies:[s._Y,s.JJ,s.JL,s.Q7,s.On,s.F,a.YG,a.W2,a.fr,a.pK,a.sr,a.j9,a.Fo,p.rH],styles:['ion-content[_ngcontent-%COMP%]{--background: rgba(var(--cdc, 255, 255, 255), 1)}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:30px}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:50%}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-radius:5px;background:#fafafa;margin-bottom:12px;border:1px solid #e4e3e3;color:#a1a1a1;--padding-start: 5px;--placeholder-color: #6b6464 !important;--placeholder-font-size: 12px}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;min-height:42px}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff!important}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:7px!important}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#939393}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:15px}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:11.5px}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:before, ion-content[_ngcontent-%COMP%]   .sign_in_page_wrap[_ngcontent-%COMP%]   .login_content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]:after{display:inline-block;content:"";border-top:.5px solid #939393;width:5rem;margin:0 1rem;transform:translateY(-4px)}ion-footer[_ngcontent-%COMP%]{border-top:1px solid #efefef!important}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;line-height:14px;margin:0}ion-content[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .5) url(mapa.e768553e2303a9d9.jpg) 0/100% 100%}.login_content[_ngcontent-%COMP%]{text-align:center;background:rgba(255,255,255,.8);padding:20px;border-radius:10px;width:300px;margin:50px auto auto;align-items:justify}']}),c})()},{path:"registro",loadChildren:()=>r.e(2142).then(r.bind(r,2142)).then(e=>e.RegistroPageModule)},{path:"registro-exitoso",loadChildren:()=>r.e(6055).then(r.bind(r,6055)).then(e=>e.RegistroExitosoPageModule)}];let h=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[p.Bz.forChild(O),p.Bz]}),c})(),f=(()=>{var e;class c{}return(e=c).\u0275fac=function(o){return new(o||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[M.ez,s.u5,a.Pc,h]}),c})()}}]);