"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2302],{2302:(C,u,o)=>{o.r(u),o.d(u,{DetalleViajesPageModule:()=>T});var v=o(6814),j=o(95),l=o(6728),p=o(6809),m=o(2574),d=o(553),e=o(6242),h=o(1675),f=o(307);function x(t,n){if(1&t&&(e.TgZ(0,"ion-item")(1,"p"),e._uU(2),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.hij("Detalle de viaje: ",a.viaje.id,"")}}function P(t,n){if(1&t&&(e.TgZ(0,"ion-item")(1,"p"),e._uU(2),e.qZA()()),2&t){const a=e.oxw();e.xp6(2),e.AsE("11:43 PM ",a.viaje.fecha," con ",a.viaje.conductor.nombre_completo,"")}}function Z(t,n){1&t&&(e.TgZ(0,"ion-item")(1,"div",5),e._UZ(2,"div",6),e.qZA()())}function y(t,n){if(1&t&&(e.TgZ(0,"ion-item")(1,"div")(2,"h3"),e._uU(3,"Detalles del viaje"),e.qZA(),e.TgZ(4,"p"),e._UZ(5,"ion-icon",7),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._UZ(8,"ion-icon",8),e._uU(9),e.qZA(),e.TgZ(10,"p"),e._UZ(11,"ion-icon",9),e._uU(12),e.qZA(),e.TgZ(13,"p"),e._UZ(14,"ion-icon",10),e._uU(15),e.qZA()()()),2&t){const a=e.oxw();e.xp6(6),e.hij(" ",a.viaje.conductor.nombre_completo," "),e.xp6(3),e.hij(" ",a.viaje.distancia," Kilometros "),e.xp6(3),e.hij(" ",a.viaje.metodo_pago," "),e.xp6(3),e.hij(" ",a.viaje.tarifa," ")}}function b(t,n){1&t&&(e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2,"No hay detalles de viaje disponibles."),e.qZA()())}const M=()=>["/tabs/tab2"],V=[{path:"",component:(()=>{var t;class n{constructor(i,s,c){this.apiService=i,this.route=s,this.datosViaje=c,this.rutas=[],this.lat=-33.59813725425291,this.lng=-70.5782624941369,this.lngFin=0,this.latFin=0}ngOnInit(){this.datosViaje.currentViajeData.subscribe(i=>{this.viaje=i})}ngAfterViewInit(){this.ir(0)}constriurMapa(){this.mapa=new m.Map({accessToken:d.N.mapboxKey,container:"mapbox",style:"mapbox://styles/mapbox/streets-v12",zoom:13,center:[this.lng,this.lat]})}ir(i){console.log("esta es la ruta seleccionada: "+this.rutas[i]);var c=[-70.57902808465514,-33.59778231829415],g=new m.Map({accessToken:d.N.mapboxKey,container:"mapbox",style:"mapbox://styles/mapbox/streets-v11",center:[c[0],c[1]],zoom:13});let _=[-74.5,40],A=[-74.45,40.1];_=c,A=[this.lngFin,this.latFin],(new m.Marker).setLngLat([c[0],c[1]]).addTo(g),(new m.Marker).setLngLat([this.viaje.destino_lon,this.viaje.destino_lat]).addTo(g),fetch(`https://api.mapbox.com/directions/v5/mapbox/driving/${this.viaje.inicio_lon},${this.viaje.inicio_lat};${this.viaje.destino_lon},${this.viaje.destino_lat}?steps=true&geometries=geojson&access_token=${d.N.mapboxKey}`).then(r=>r.json()).then(r=>{var U=r.routes[0].geometry;g.on("load",function(){g.addLayer({id:"route",type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:U}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}})})}).catch(r=>{console.log(r)})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(h.M),e.Y36(p.gz),e.Y36(f.o))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-detalle-viajes"]],decls:13,vars:9,consts:[[3,"translucent"],[1,"linkBack",3,"routerLink"],["name","arrow-back-outline"],[3,"fullscreen"],[4,"ngIf"],[1,"container"],["id","mapbox","width","600","height","200",2,"border","0"],["name","person-circle"],["name","navigate-circle"],["name","cash"],["name","wallet"]],template:function(i,s){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-item")(3,"a",1)(4,"h4"),e._UZ(5,"ion-icon",2),e._uU(6," Volver"),e.qZA()()()()(),e.TgZ(7,"ion-content",3),e.YNc(8,x,3,1,"ion-item",4)(9,P,3,2,"ion-item",4)(10,Z,3,0,"ion-item",4)(11,y,16,4,"ion-item",4)(12,b,3,0,"ion-item",4),e.qZA()),2&i&&(e.Q6J("translucent",!0),e.xp6(3),e.Q6J("routerLink",e.DdM(8,M)),e.xp6(4),e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf",s.viaje),e.xp6(1),e.Q6J("ngIf",s.viaje),e.xp6(1),e.Q6J("ngIf",s.viaje),e.xp6(1),e.Q6J("ngIf",s.viaje),e.xp6(1),e.Q6J("ngIf",!s.viaje))},dependencies:[v.O5,l.W2,l.Gu,l.gu,l.Ie,l.Q$,l.sr,l.Fo,p.rH],styles:['@import"https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css";a[_ngcontent-%COMP%]{text-decoration:none}.solicita-viaje[_ngcontent-%COMP%]{margin-top:10px}.container[_ngcontent-%COMP%]{height:50vh!important}#mapbox[_ngcontent-%COMP%]{height:100%!important;width:100%;position:absolute!important;top:0;left:0}ion-header[_ngcontent-%COMP%]{padding:0;background-color:#dadada93;color:#000}.toolbar-container[_ngcontent-%COMP%]{display:none!important}.form-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}']}),n})()}];let D=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[p.Bz.forChild(V),p.Bz]}),n})(),T=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.ez,j.u5,l.Pc,D]}),n})()}}]);